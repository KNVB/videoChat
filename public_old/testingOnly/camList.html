<html>
	<head>
		<style>
			#container {
				align-items:center;
				display:flex;
				flex-direction: row;
				justify-content:center;
				width:100%;
				position:relative;
			}
		</style>
		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		<script>
			var mediaStream=null;
			var constraints = {};
			function getAudioConfig() {
				var result=	{
								channelCount: 2,
								echoCancellation:false,
								sampleSize: 16
							};
				return result;			
			}		
		
		
			getCameraList = async () => {
				var devices = await navigator.mediaDevices.enumerateDevices();
				var videoDevices = devices.filter(device => device.kind === 'videoinput');
				var camList=[];
				//console.log(devices);
				var devicesContainer=document.getElementById("devicesContainer");
				devicesContainer.innerHTML="";
				devices.forEach((device)=>{
					devicesContainer.innerHTML+=JSON.stringify(device)+"<br>";
				});
				videoDevices.map(videoDevice => {
					camList.push(videoDevice);
				});
				return camList;
			};
			
			
			
			$( document ).ready(function() {
				var cameraSelectBox=$("#camera")[0];
				getCameraList().then((list)=>{
					$(cameraSelectBox).empty();
					var option=document.createElement("option");
					option.value="";
					option.text="Please Select Camera";
					cameraSelectBox.append(option);
					
					list.forEach((camera)=>{
						var option=document.createElement("option");
						option.value=camera.deviceId;
						option.text=camera.label;
						cameraSelectBox.append(option);
					});
				});
			});
			function startStream(cameraOptions) {
				var constraints = {
					video:{
							width:1920,
							height:1080},
					deviceId: {
					  exact: cameraOptions.value
					}
				};
				var video=document.getElementById("video");
				navigator.mediaDevices.getUserMedia(constraints)
					.then((stream) => 
						{
							mediaStream=stream;
							video.srcObject = stream;
							video.play();
						})
					.catch((error)=> 
						{
							alert("Getting Media failure:"+error);
							console.log(constraints);
						});
			}
		</script>
	</head>
	<body>
		<div id="container">
			<select id="camera" onchange="startStream(this)"></select>
			<video id="video"></video>
		</div>
		<div id="devicesContainer">
		</div>		
	</body>
</html>	